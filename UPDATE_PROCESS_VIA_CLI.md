# üöÄ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Transaction Process —á–µ—Ä–µ–∑ Sharetribe CLI

## üìã –ß—Ç–æ –±—É–¥–µ–º –¥–µ–ª–∞—Ç—å:

–ó–∞–≥—Ä—É–∑–∏–º –ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª `ext/transaction-processes/assignment-flow-v3/process.edn` –≤ Sharetribe Console —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É.

---

## –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Sharetribe CLI

–û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
npm install -g @sharetribe/flex-cli
```

–ò–ª–∏ —á–µ—Ä–µ–∑ yarn:

```bash
yarn global add @sharetribe/flex-cli
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:**

```bash
flex-cli --version
```

–î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –≤–µ—Ä—Å–∏—è CLI (–Ω–∞–ø—Ä–∏–º–µ—Ä, `6.0.0`).

---

## –®–∞–≥ 2: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ Sharetribe

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –¥–ª—è –≤—Ö–æ–¥–∞:

```bash
flex-cli login
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:**

1. CLI –æ—Ç–∫—Ä–æ–µ—Ç –±—Ä–∞—É–∑–µ—Ä —Å —Ñ–æ—Ä–º–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
2. –í–æ–π–¥–∏—Ç–µ –≤ –≤–∞—à Sharetribe –∞–∫–∫–∞—É–Ω—Ç (—Ç–æ—Ç –∂–µ –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å, —á—Ç–æ –∏ –¥–ª—è Console)
3. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª
4. –í—ã —É–≤–∏–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: `‚úì Logged in as your-email@example.com`

---

## –®–∞–≥ 3: –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤ Console

### 3.1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞:

```bash
cd /Users/admin/web-template
```

### 3.2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å:

```bash
flex-cli process push --process assignment-flow-v3 --path ext/transaction-processes/assignment-flow-v3/process.edn --marketplace youdoae-dev
```

**–ü–æ—è—Å–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:**

- `--process assignment-flow-v3` - –∏–º—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤ Console
- `--path ext/...` - –ø—É—Ç—å –∫ –ª–æ–∫–∞–ª—å–Ω–æ–º—É —Ñ–∞–π–ª—É
- `--marketplace youdoae-dev` - ID –≤–∞—à–µ–≥–æ marketplace

### 3.3. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É:

CLI —Å–ø—Ä–æ—Å–∏—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ:

```
? This will update process 'assignment-flow-v3' in marketplace 'youdoae-dev'. Continue? (Y/n)
```

–í–≤–µ–¥–∏—Ç–µ **`Y`** –∏ –Ω–∞–∂–º–∏—Ç–µ Enter.

---

## ‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

```
‚úì Process 'assignment-flow-v3' updated successfully
‚úì Version: 2 (–∏–ª–∏ –≤—ã—à–µ)
```

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**

1. ‚úÖ `transition/complete` —Ç–µ–ø–µ—Ä—å –∏–º–µ–µ—Ç `:actor :actor.role/provider`
2. ‚úÖ `transition/complete` —Ç–µ–ø–µ—Ä—å –∏–º–µ–µ—Ç `:privileged? true`
3. ‚úÖ Provider (–ó–∞–∫–∞–∑—á–∏–∫) –º–æ–∂–µ—Ç –∑–∞–∫—Ä—ã–≤–∞—Ç—å –∑–∞–¥–∞–Ω–∏—è

---

## –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Console

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://flex-console.sharetribe.com/
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ **Build** ‚Üí **Transaction processes**
3. –ù–∞–π–¥–∏—Ç–µ **`assignment-flow-v3`**
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤–µ—Ä—Å–∏—è —É–≤–µ–ª–∏—á–∏–ª–∞—Å—å (–±—ã–ª–æ Version 1, —Å—Ç–∞–ª–æ Version 2)

---

## –®–∞–≥ 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 5.1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä:

–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ, –≥–¥–µ –∑–∞–ø—É—â–µ–Ω `yarn dev`, –Ω–∞–∂–º–∏—Ç–µ **Ctrl+C** –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏, –∑–∞—Ç–µ–º:

```bash
yarn dev
```

### 5.2. –û–±–Ω–æ–≤–∏—Ç–µ –±—Ä–∞—É–∑–µ—Ä:

–ù–∞–∂–º–∏—Ç–µ **Cmd+Shift+R** (–∏–ª–∏ Ctrl+Shift+R) –¥–ª—è –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

### 5.3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–∫—Ä—ã—Ç—å –∑–∞–¥–∞–Ω–∏–µ:

1. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –∫–∞–∫ **Provider (–ó–∞–∫–∞–∑—á–∏–∫)**
2. –û—Ç–∫—Ä–æ–π—Ç–µ —á–∞—Ç —Å –ø—Ä–∏–Ω—è—Ç—ã–º Customer (–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–º)
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"–ó–∞–∫—Ä—ã—Ç—å –∑–∞–¥–∞–Ω–∏–µ"**
4. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ

### ‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

**–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:**
```
üîÑ onComplete: starting transition/complete for transaction ...
‚úÖ onComplete: transition successful
```

**–í –∫–æ–Ω—Å–æ–ª–∏ backend (—Ç–µ—Ä–º–∏–Ω–∞–ª):**
```
üîç getTrustedSdk: token exchange successful
üîç transition-privileged: calling SDK with body: ...
‚úÖ transition-privileged: success, status = 200
```

**–í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ:**
- ‚úÖ –ó–∞–¥–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- ‚úÖ –ü–æ—è–≤–ª—è–µ—Ç—Å—è —Ñ–æ—Ä–º–∞ –¥–ª—è –æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –æ—Ç–∑—ã–≤–∞

---

## üÜò –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞ 1: "Command not found: flex-cli"

**–†–µ—à–µ–Ω–∏–µ:**

–ï—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ npm, –Ω–æ –∫–æ–º–∞–Ω–¥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ:

```bash
npx @sharetribe/flex-cli --version
```

–¢–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `npx @sharetribe/flex-cli` –≤–º–µ—Å—Ç–æ `flex-cli` –≤–æ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥–∞—Ö.

### –ü—Ä–æ–±–ª–µ–º–∞ 2: "Marketplace 'youdoae-dev' not found"

**–†–µ—à–µ–Ω–∏–µ:**

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö marketplace:

```bash
flex-cli marketplaces list
```

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ID –∏–∑ —Å–ø–∏—Å–∫–∞.

### –ü—Ä–æ–±–ª–µ–º–∞ 3: "Permission denied"

**–†–µ—à–µ–Ω–∏–µ:**

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã:

```bash
flex-cli whoami
```

–ï—Å–ª–∏ –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
flex-cli login
```

### –ü—Ä–æ–±–ª–µ–º–∞ 4: –í—Å–µ –µ—â–µ 403 Forbidden

**–†–µ—à–µ–Ω–∏–µ:**

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤–µ—Ä—Å–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ —É–≤–µ–ª–∏—á–∏–ª–∞—Å—å –≤ Console
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ `yarn dev` (Ctrl+C ‚Üí `yarn dev`)
3. –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ–±–Ω–æ–≤–∏—Ç–µ –±—Ä–∞—É–∑–µ—Ä (Cmd+Shift+R)
4. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞ (DevTools ‚Üí Network ‚Üí Disable cache)

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã CLI

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
flex-cli process list --marketplace youdoae-dev

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ–∫—É—â—É—é –≤–µ—Ä—Å–∏—é –ø—Ä–æ—Ü–µ—Å—Å–∞
flex-cli process show --process assignment-flow-v3 --marketplace youdoae-dev

# –í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞
flex-cli logout

# –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º
flex-cli help
```

---

## üîÑ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –ø—Ä–æ—Ü–µ—Å—Å–∞

–í –±—É–¥—É—â–µ–º, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å:

1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `ext/transaction-processes/assignment-flow-v3/process.edn`
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ:
   ```bash
   flex-cli process push --process assignment-flow-v3 --path ext/transaction-processes/assignment-flow-v3/process.edn --marketplace youdoae-dev
   ```
3. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ `Y`
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

---

**–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ —Å–æ–æ–±—â–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç!** üöÄ

